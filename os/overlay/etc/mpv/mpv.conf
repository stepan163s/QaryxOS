# QaryxOS mpv configuration
# Optimized for Radxa Zero 3W (RK3566) â€” DRM/KMS, hardware decode

# --- Hardware decode (RK3566 MPP) ---
hwdec=rkmpp
hwdec-codecs=h264,hevc,vp9,av1   # explicit: skip codecs rkmpp can't handle
vo=drm
drm-connector=HDMI-A-1
drm-device=/dev/dri/card0
vd-lavc-dr=yes                    # direct rendering: skip extra buffer copy

# --- IPC socket for API control ---
input-ipc-server=/tmp/mpv.sock
input-terminal=no

# --- Caching (VOD default: 30s buffer) ---
cache=yes
cache-secs=30
cache-pause=yes
cache-pause-initial=yes
cache-pause-wait=3
demuxer-max-bytes=50MiB
demuxer-readahead-secs=20

# --- IPTV / live streams: low-latency profile ---
# Activated via API: mpv set-property profile live
[live]
cache=no
cache-pause=no
demuxer-max-bytes=8MiB
demuxer-readahead-secs=3
stream-lavf-o=reconnect=1:reconnect_streamed=1:reconnect_delay_max=2

[default]

# --- Network ---
network-timeout=10
user-agent=Mozilla/5.0

# --- Audio ---
ao=alsa
audio-device=auto
volume=80
volume-max=100

# --- Display ---
fullscreen=yes
keep-open=yes
idle=yes

# --- Subtitles (disabled for IPTV/stream) ---
sub-auto=no

# --- OSD ---
osd-level=1
osd-font-size=36

# --- Logging ---
log-file=/var/log/qaryxos-mpv.log
msg-level=all=warn
